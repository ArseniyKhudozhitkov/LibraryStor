<Page x:Class="Library.Views.ManageOrdersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Управление заказами" 
      Background="#FFFFFF"
      Loaded="Page_Loaded">

    <Page.Resources>
        <Style TargetType="Button">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#00FA9A"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Width" Value="120"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                  Text="Управление заказами" 
                  FontSize="20" 
                  FontWeight="Bold" 
                  Margin="10,5"
                  HorizontalAlignment="Center"/>

        <DataGrid Grid.Row="1" 
                 x:Name="ordersGrid" 
                 AutoGenerateColumns="False" 
                 IsReadOnly="True"
                 Margin="10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="40"/>
                <DataGridTextColumn Header="ID книги" Binding="{Binding BookId}" Width="60"/>
                <DataGridTextColumn Header="Название книги" Binding="{Binding BookTitle}" Width="180"/>
                <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="70"/>
                <DataGridTextColumn Header="Дата заказа" Binding="{Binding OrderDate, StringFormat=dd.MM.yyyy HH:mm}" Width="120"/>
                <DataGridTextColumn Header="Клиент" Binding="{Binding CustomerName}" Width="130"/>
                <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="120"/>
                <DataGridTextColumn Header="Общая стоимость" Binding="{Binding TotalPrice, StringFormat={}{0}₽}" Width="100"/>
                <DataGridTemplateColumn Header="Действия" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="❌" 
                                   ToolTip="Удалить заказ" 
                                   Click="DeleteOrderButton_Click"
                                   Background="Transparent" 
                                   BorderThickness="0"
                                   FontSize="14"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Border Grid.Row="2" 
               BorderBrush="#00FA9A" 
               BorderThickness="1" 
               Margin="10" 
               Padding="10"
               Background="#F0FFF0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Книга:" VerticalAlignment="Center" Margin="5,0"/>
                <ComboBox Grid.Column="1" x:Name="cmbBooks" DisplayMemberPath="Title" Margin="5,0"/>

                <TextBlock Grid.Column="2" Text="Количество:" VerticalAlignment="Center" Margin="5,0"/>
                <TextBox Grid.Column="3" x:Name="txtOrderQuantity" Text="1" Width="60" Margin="5,0"/>

                <TextBlock Grid.Column="4" Text="Клиент:" VerticalAlignment="Center" Margin="5,0"/>
                <TextBox Grid.Column="5" x:Name="txtCustomerName" Width="120" Margin="5,0"/>

                <Button Grid.Column="6" Content="Добавить заказ" Click="AddOrderButton_Click" Margin="5,0"/>
            </Grid>
        </Border>

        <StatusBar Grid.Row="3" Background="#7FFF00">
            <TextBlock x:Name="statusText" Text="Готов к работе"/>
        </StatusBar>
    </Grid>
</Page>
